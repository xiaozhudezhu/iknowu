<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.swinginwind.iknowu.dao.BaseOrderMapper" >
  <resultMap id="BaseResultMap" type="com.swinginwind.iknowu.model.BaseOrder" >
    <id column="OID" property="oid" jdbcType="CHAR" />
    <result column="FID" property="fid" jdbcType="CHAR" />
    <result column="TID" property="tid" jdbcType="CHAR" />
    <result column="NAME" property="name" jdbcType="CHAR" />
    <result column="ISSUE_CONTENT" property="issueContent" jdbcType="CHAR" />
    <result column="TYPE" property="type" jdbcType="CHAR" />
    <result column="CREATE_USER" property="createUser" jdbcType="INTEGER" />
    <result column="CREATE_USER_NAME" property="createUserName" jdbcType="VARCHAR" />
    <result column="ANSWER_USER" property="answerUser" jdbcType="INTEGER" />
    <result column="ANSWER_USER_NAME" property="answerUserName" jdbcType="VARCHAR" />
    <result column="PARENT" property="parent" jdbcType="CHAR" />
    <result column="DATE" property="date" jdbcType="DATE" />
    <result column="IMPLEVEL" property="implevel" jdbcType="CHAR" />
    <result column="URGENT" property="urgent" jdbcType="CHAR" />
    <result column="PRICE" property="price" jdbcType="CHAR" />
    <result column="MASTER" property="master" jdbcType="CHAR" />
    <result column="DELDATE" property="deldate" jdbcType="DATE" />
    <result column="DELPROCESS" property="delprocess" jdbcType="CHAR" />
    <result column="STATE" property="state" jdbcType="CHAR" />
    <result column="CUS_CONTENT" property="cusContent" jdbcType="CHAR" />
    <result column="CUS_RESULT" property="cusResult" jdbcType="CHAR" />
    <result column="CUSS_CONTENT" property="cussContent" jdbcType="CHAR" />
    <result column="CUSS_RESULT" property="cussResult" jdbcType="CHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    OID, FID, TID, NAME, ISSUE_CONTENT, TYPE, CREATE_USER, ANSWER_USER, PARENT, DATE, IMPLEVEL, URGENT, 
    PRICE, MASTER, DELDATE, DELPROCESS, STATE, CUS_CONTENT, CUS_RESULT, CUSS_CONTENT, 
    CUSS_RESULT
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select 
    <include refid="Base_Column_List" />
    from t_base_order
    where OID = #{oid,jdbcType=CHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    delete from t_base_order
    where OID = #{oid,jdbcType=CHAR}
  </delete>
  <insert id="insert" parameterType="com.swinginwind.iknowu.model.BaseOrder" >
    insert into t_base_order (OID, FID, TID, NAME, 
      ISSUE_CONTENT, TYPE, CREATE_USER, ANSWER_USER,
      PARENT, DATE, IMPLEVEL, URGENT, 
      PRICE, MASTER, DELDATE, DELPROCESS, 
      STATE, CUS_CONTENT, CUS_RESULT, 
      CUSS_CONTENT, CUSS_RESULT)
    values (#{oid,jdbcType=CHAR}, #{fid,jdbcType=CHAR}, #{tid,jdbcType=CHAR}, #{name,jdbcType=CHAR}, 
      #{issueContent,jdbcType=CHAR}, #{type,jdbcType=CHAR}, #{createUser,jdbcType=INTEGER}, #{answerUser,jdbcType=INTEGER}, 
      #{parent,jdbcType=CHAR}, #{date,jdbcType=TIMESTAMP}, #{implevel,jdbcType=CHAR}, #{urgent,jdbcType=CHAR}, 
      #{price,jdbcType=CHAR}, #{master,jdbcType=CHAR}, #{deldate,jdbcType=TIMESTAMP}, #{delprocess,jdbcType=CHAR}, 
      #{state,jdbcType=CHAR}, #{cusContent,jdbcType=CHAR}, #{cusResult,jdbcType=CHAR}, 
      #{cussContent,jdbcType=CHAR}, #{cussResult,jdbcType=CHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.swinginwind.iknowu.model.BaseOrder" >
    insert into t_base_order
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="oid != null" >
        OID,
      </if>
      <if test="fid != null" >
        FID,
      </if>
      <if test="tid != null" >
        TID,
      </if>
      <if test="name != null" >
        NAME,
      </if>
      <if test="issueContent != null" >
        ISSUE_CONTENT,
      </if>
      <if test="type != null" >
        TYPE,
      </if>
      <if test="createUser != null" >
        CREATE_USER,
      </if>
      <if test="answerUser != null" >
        ANSWER_USER,
      </if>
      <if test="parent != null" >
        PARENT,
      </if>
      <if test="date != null" >
        DATE,
      </if>
      <if test="implevel != null" >
        IMPLEVEL,
      </if>
      <if test="urgent != null" >
        URGENT,
      </if>
      <if test="price != null" >
        PRICE,
      </if>
      <if test="master != null" >
        MASTER,
      </if>
      <if test="deldate != null" >
        DELDATE,
      </if>
      <if test="delprocess != null" >
        DELPROCESS,
      </if>
      <if test="state != null" >
        STATE,
      </if>
      <if test="cusContent != null" >
        CUS_CONTENT,
      </if>
      <if test="cusResult != null" >
        CUS_RESULT,
      </if>
      <if test="cussContent != null" >
        CUSS_CONTENT,
      </if>
      <if test="cussResult != null" >
        CUSS_RESULT,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="oid != null" >
        #{oid,jdbcType=CHAR},
      </if>
      <if test="fid != null" >
        #{fid,jdbcType=CHAR},
      </if>
      <if test="tid != null" >
        #{tid,jdbcType=CHAR},
      </if>
      <if test="name != null" >
        #{name,jdbcType=CHAR},
      </if>
      <if test="issueContent != null" >
        #{issueContent,jdbcType=CHAR},
      </if>
      <if test="type != null" >
        #{type,jdbcType=CHAR},
      </if>
      <if test="createUser != null" >
        #{createUser,jdbcType=INTEGER},
      </if>
      <if test="answerUser != null" >
        #{answerUser,jdbcType=INTEGER},
      </if>
      <if test="parent != null" >
        #{parent,jdbcType=CHAR},
      </if>
      <if test="date != null" >
        #{date,jdbcType=TIMESTAMP},
      </if>
      <if test="implevel != null" >
        #{implevel,jdbcType=CHAR},
      </if>
      <if test="urgent != null" >
        #{urgent,jdbcType=CHAR},
      </if>
      <if test="price != null" >
        #{price,jdbcType=CHAR},
      </if>
      <if test="master != null" >
        #{master,jdbcType=CHAR},
      </if>
      <if test="deldate != null" >
        #{deldate,jdbcType=TIMESTAMP},
      </if>
      <if test="delprocess != null" >
        #{delprocess,jdbcType=CHAR},
      </if>
      <if test="state != null" >
        #{state,jdbcType=CHAR},
      </if>
      <if test="cusContent != null" >
        #{cusContent,jdbcType=CHAR},
      </if>
      <if test="cusResult != null" >
        #{cusResult,jdbcType=CHAR},
      </if>
      <if test="cussContent != null" >
        #{cussContent,jdbcType=CHAR},
      </if>
      <if test="cussResult != null" >
        #{cussResult,jdbcType=CHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.swinginwind.iknowu.model.BaseOrder" >
    update t_base_order
    <set >
      <if test="fid != null" >
        FID = #{fid,jdbcType=CHAR},
      </if>
      <if test="tid != null" >
        TID = #{tid,jdbcType=CHAR},
      </if>
      <if test="name != null" >
        NAME = #{name,jdbcType=CHAR},
      </if>
      <if test="issueContent != null" >
        ISSUE_CONTENT = #{issueContent,jdbcType=CHAR},
      </if>
      <if test="type != null" >
        TYPE = #{type,jdbcType=CHAR},
      </if>
      <if test="createUser != null" >
        CREATE_USER = #{createUser,jdbcType=INTEGER},
      </if>
      <if test="answerUser != null" >
        ANSWER_USER = #{answerUser,jdbcType=INTEGER},
      </if>
      <if test="parent != null" >
        PARENT = #{parent,jdbcType=CHAR},
      </if>
      <if test="date != null" >
        DATE = #{date,jdbcType=TIMESTAMP},
      </if>
      <if test="implevel != null" >
        IMPLEVEL = #{implevel,jdbcType=CHAR},
      </if>
      <if test="urgent != null" >
        URGENT = #{urgent,jdbcType=CHAR},
      </if>
      <if test="price != null" >
        PRICE = #{price,jdbcType=CHAR},
      </if>
      <if test="master != null" >
        MASTER = #{master,jdbcType=CHAR},
      </if>
      <if test="deldate != null" >
        DELDATE = #{deldate,jdbcType=TIMESTAMP},
      </if>
      <if test="delprocess != null" >
        DELPROCESS = #{delprocess,jdbcType=CHAR},
      </if>
      <if test="state != null" >
        STATE = #{state,jdbcType=CHAR},
      </if>
      <if test="cusContent != null" >
        CUS_CONTENT = #{cusContent,jdbcType=CHAR},
      </if>
      <if test="cusResult != null" >
        CUS_RESULT = #{cusResult,jdbcType=CHAR},
      </if>
      <if test="cussContent != null" >
        CUSS_CONTENT = #{cussContent,jdbcType=CHAR},
      </if>
      <if test="cussResult != null" >
        CUSS_RESULT = #{cussResult,jdbcType=CHAR},
      </if>
    </set>
    where OID = #{oid,jdbcType=CHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.swinginwind.iknowu.model.BaseOrder" >
    update t_base_order
    set FID = #{fid,jdbcType=CHAR},
      TID = #{tid,jdbcType=CHAR},
      NAME = #{name,jdbcType=CHAR},
      ISSUE_CONTENT = #{issueContent,jdbcType=CHAR},
      TYPE = #{type,jdbcType=CHAR},
      CREATE_USER = #{createUser,jdbcType=INTEGER},
      ANSWER_USER = #{answerUser,jdbcType=INTEGER},
      PARENT = #{parent,jdbcType=CHAR},
      DATE = #{date,jdbcType=TIMESTAMP},
      IMPLEVEL = #{implevel,jdbcType=CHAR},
      URGENT = #{urgent,jdbcType=CHAR},
      PRICE = #{price,jdbcType=CHAR},
      MASTER = #{master,jdbcType=CHAR},
      DELDATE = #{deldate,jdbcType=TIMESTAMP},
      DELPROCESS = #{delprocess,jdbcType=CHAR},
      STATE = #{state,jdbcType=CHAR},
      CUS_CONTENT = #{cusContent,jdbcType=CHAR},
      CUS_RESULT = #{cusResult,jdbcType=CHAR},
      CUSS_CONTENT = #{cussContent,jdbcType=CHAR},
      CUSS_RESULT = #{cussResult,jdbcType=CHAR}
    where OID = #{oid,jdbcType=CHAR}
  </update>
  <select id="select" resultMap="BaseResultMap" >
    select 
    <include refid="Base_Column_List" />,
    (select t1.nick_name from t_sys_user t1 where t.create_user=t1.id) as create_user_name,
    (select t2.nick_name from t_sys_user t2 where t.answer_user=t2.id) as answer_user_name
    from t_base_order t
    <where>
      <if test="createUser != null" >
        and t.CREATE_USER = #{createUser,jdbcType=INTEGER}
      </if>
      <if test="answerUser != null" >
        and t.ANSWER_USER = #{answerUser,jdbcType=INTEGER}
      </if>
      <if test="startTime != null" >
        and t.DATE &gt; #{startTime,jdbcType=TIMESTAMP}
      </if>
      <if test="endTime != null" >
        and t.DATE &lt; date_add(#{endTime,jdbcType=TIMESTAMP}, interval 1 day)
      </if>
      <if test="states != null" >
      	and t.STATE in <foreach collection="states" item="state" index="index"
             open="(" close=")" separator=",">
      	  #{state}
    	</foreach>
      </if>
      <if test="types != null" >
      	and t.TYPE in <foreach collection="types" item="type" index="index"
             open="(" close=")" separator=",">
      	  #{type}
    	</foreach>
      </if>
    </where>
    order by date desc
  </select>
</mapper>